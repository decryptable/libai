function Y(x,V=0){return(H[x[V+0]]+H[x[V+1]]+H[x[V+2]]+H[x[V+3]]+"-"+H[x[V+4]]+H[x[V+5]]+"-"+H[x[V+6]]+H[x[V+7]]+"-"+H[x[V+8]]+H[x[V+9]]+"-"+H[x[V+10]]+H[x[V+11]]+H[x[V+12]]+H[x[V+13]]+H[x[V+14]]+H[x[V+15]]).toLowerCase()}var H=[];for(let x=0;x<256;++x)H.push((x+256).toString(16).slice(1));var F,P=new Uint8Array(16);function D(){if(!F){if(typeof crypto==="undefined"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");F=crypto.getRandomValues.bind(crypto)}return F(P)}function j(x,V,U){let y;if(x)y=Z(x.random??x.rng?.()??D(),x.msecs,x.seq,V,U);else{const R=Date.now(),$=D();w(K,R,$),y=Z($,K.msecs,K.seq,V,U)}return V??Y(y)}function w(x,V,U){if(x.msecs??=-1/0,x.seq??=0,V>x.msecs)x.seq=U[6]<<23|U[7]<<16|U[8]<<8|U[9],x.msecs=V;else if(x.seq=x.seq+1|0,x.seq===0)x.msecs++;return x}function Z(x,V,U,y,R=0){if(x.length<16)throw new Error("Random bytes length must be >= 16");if(!y)y=new Uint8Array(16),R=0;else if(R<0||R+16>y.length)throw new RangeError(`UUID byte range ${R}:${R+15} is out of buffer bounds`);return V??=Date.now(),U??=x[6]*127<<24|x[7]<<16|x[8]<<8|x[9],y[R++]=V/1099511627776&255,y[R++]=V/4294967296&255,y[R++]=V/16777216&255,y[R++]=V/65536&255,y[R++]=V/256&255,y[R++]=V&255,y[R++]=112|U>>>28&15,y[R++]=U>>>20&255,y[R++]=128|U>>>14&63,y[R++]=U>>>6&255,y[R++]=U<<2&255|x[10]&3,y[R++]=x[11],y[R++]=x[12],y[R++]=x[13],y[R++]=x[14],y[R++]=x[15],y}var K={},B=j;var A=async()=>{try{return(await(await fetch("https://saas.castbox.fm/auth/api/v1/tokens/provider/secret",{headers:{"x-app-id":"ai-seek","content-type":"application/json"},body:JSON.stringify({secret:B()}),method:"POST"})).json()).data.token}catch(x){return console.error(x),null}},z=A;class M extends TransformStream{#x="";constructor(x={allowCR:!1}){super({transform:(V,U)=>{V=this.#x+V;while(!0){const y=V.indexOf("\n"),R=x.allowCR?V.indexOf("\r"):-1;if(R!==-1&&R!==V.length-1&&(y===-1||y-1>R)){U.enqueue(V.slice(0,R)),V=V.slice(R+1);continue}if(y===-1)break;const $=V[y-1]==="\r"?y-1:y;U.enqueue(V.slice(0,$)),V=V.slice(y+1)}this.#x=V},flush:(V)=>{if(this.#x==="")return;const U=x.allowCR&&this.#x.endsWith("\r")?this.#x.slice(0,-1):this.#x;V.enqueue(U)}})}}function W(x){let V=new TextDecoderStream,U=new M({allowCR:!0});return x.pipeThrough(V).pipeThrough(U)}function _(x){let U=/[:]\s*/.exec(x),y=U&&U.index;if(y)return[x.substring(0,y),x.substring(y+U[0].length)]}function Q(x,V,U){if(!x.get(V))x.set(V,U)}async function*T(x,V){if(!x.body)return;let U=W(x.body),y,R=U.getReader(),$;for(;;){if(V&&V.aborted)return R.cancel();if(y=await R.read(),y.done)return;if(!y.value){if($)yield $;$=void 0;continue}let[X,g]=_(y.value)||[];if(!X)continue;if(X==="data")$||={},$[X]=$[X]?$[X]+"\n"+g:g;else if(X==="event")$||={},$[X]=g;else if(X==="id")$||={},$[X]=+g||g;else if(X==="retry")$||={},$[X]=+g||void 0}}async function G(x,V){let U=new Request(x,V);Q(U.headers,"Accept","text/event-stream"),Q(U.headers,"Content-Type","application/json");let y=await fetch(U);if(!y.ok)throw y;return T(y,U.signal)}var m=async(x,V,U,y,R,$)=>{try{const X=await G("https://ai-seek.thebetter.ai/v3/chat/send",{headers:{"X-App-Id":"ai-seek","X-Access-Token":V,"content-type":"application/json"},body:JSON.stringify({sessionId:R??B(),model:U??"deepseek/deepseek-r1",text:x,restrictedType:"PRO_USER",imageS3Keys:null,fileS3Keys:null,webSearch:y}),method:"POST"});let g;for await(let N of X)try{const E=JSON.parse(N.data);if($)$(E);g+=E.content}catch(E){}return g}catch(X){return null}},C=m;var q=async()=>{try{return(await(await fetch("https://ai-seek.thebetter.ai/v1/chat/list_models",{headers:{"X-App-Id":"ai-seek"}})).json()).data.models}catch(x){return null}},J=q;var S={generateAuthToken:z,getChatResponse:C,getModels:J},V0=S;export{V0 as default};
